{"remainingRequest":"C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\src\\components\\TopNav\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\src\\components\\TopNav\\index.vue","mtime":1659516535000},{"path":"C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\babel.config.js","mtime":1659516535000},{"path":"C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659879409902},{"path":"C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1659879412177},{"path":"C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659879409902},{"path":"C:\\learning\\项目\\RuoYi-Vue\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1659879414529}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnZhciBfcm91dGVyID0gcmVxdWlyZSgiQC9yb3V0ZXIiKTsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIOmakOiXj+S+p+i+ueagj+i3r+eUsQp2YXIgaGlkZUxpc3QgPSBbJy9pbmRleCcsICcvdXNlci9wcm9maWxlJ107CnZhciBfZGVmYXVsdCA9IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6aG26YOo5qCP5Yid5aeL5pWwCiAgICAgIHZpc2libGVOdW1iZXI6IDUsCiAgICAgIC8vIOW9k+WJjea/gOa0u+iPnOWNleeahCBpbmRleAogICAgICBjdXJyZW50SW5kZXg6IHVuZGVmaW5lZAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0aGVtZTogZnVuY3Rpb24gdGhlbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5ncy50aGVtZTsKICAgIH0sCiAgICAvLyDpobbpg6jmmL7npLroj5zljZUKICAgIHRvcE1lbnVzOiBmdW5jdGlvbiB0b3BNZW51cygpIHsKICAgICAgdmFyIHRvcE1lbnVzID0gW107CiAgICAgIHRoaXMucm91dGVycy5tYXAoZnVuY3Rpb24gKG1lbnUpIHsKICAgICAgICBpZiAobWVudS5oaWRkZW4gIT09IHRydWUpIHsKICAgICAgICAgIC8vIOWFvOWuuemhtumDqOagj+S4gOe6p+iPnOWNleWGhemDqOi3s+i9rAogICAgICAgICAgaWYgKG1lbnUucGF0aCA9PT0gIi8iKSB7CiAgICAgICAgICAgIHRvcE1lbnVzLnB1c2gobWVudS5jaGlsZHJlblswXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0b3BNZW51cy5wdXNoKG1lbnUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB0b3BNZW51czsKICAgIH0sCiAgICAvLyDmiYDmnInnmoTot6/nlLHkv6Hmga8KICAgIHJvdXRlcnM6IGZ1bmN0aW9uIHJvdXRlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wZXJtaXNzaW9uLnRvcGJhclJvdXRlcnM7CiAgICB9LAogICAgLy8g6K6+572u5a2Q6Lev55SxCiAgICBjaGlsZHJlbk1lbnVzOiBmdW5jdGlvbiBjaGlsZHJlbk1lbnVzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNoaWxkcmVuTWVudXMgPSBbXTsKICAgICAgdGhpcy5yb3V0ZXJzLm1hcChmdW5jdGlvbiAocm91dGVyKSB7CiAgICAgICAgZm9yICh2YXIgaXRlbSBpbiByb3V0ZXIuY2hpbGRyZW4pIHsKICAgICAgICAgIGlmIChyb3V0ZXIuY2hpbGRyZW5baXRlbV0ucGFyZW50UGF0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGlmIChyb3V0ZXIucGF0aCA9PT0gIi8iKSB7CiAgICAgICAgICAgICAgcm91dGVyLmNoaWxkcmVuW2l0ZW1dLnBhdGggPSAiLyIgKyByb3V0ZXIuY2hpbGRyZW5baXRlbV0ucGF0aDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzaHR0cChyb3V0ZXIuY2hpbGRyZW5baXRlbV0ucGF0aCkpIHsKICAgICAgICAgICAgICAgIHJvdXRlci5jaGlsZHJlbltpdGVtXS5wYXRoID0gcm91dGVyLnBhdGggKyAiLyIgKyByb3V0ZXIuY2hpbGRyZW5baXRlbV0ucGF0aDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJvdXRlci5jaGlsZHJlbltpdGVtXS5wYXJlbnRQYXRoID0gcm91dGVyLnBhdGg7CiAgICAgICAgICB9CgogICAgICAgICAgY2hpbGRyZW5NZW51cy5wdXNoKHJvdXRlci5jaGlsZHJlbltpdGVtXSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIF9yb3V0ZXIuY29uc3RhbnRSb3V0ZXMuY29uY2F0KGNoaWxkcmVuTWVudXMpOwogICAgfSwKICAgIC8vIOm7mOiupOa/gOa0u+eahOiPnOWNlQogICAgYWN0aXZlTWVudTogZnVuY3Rpb24gYWN0aXZlTWVudSgpIHsKICAgICAgdmFyIHBhdGggPSB0aGlzLiRyb3V0ZS5wYXRoOwogICAgICB2YXIgYWN0aXZlUGF0aCA9IHBhdGg7CgogICAgICBpZiAocGF0aCAhPT0gdW5kZWZpbmVkICYmIHBhdGgubGFzdEluZGV4T2YoIi8iKSA+IDAgJiYgaGlkZUxpc3QuaW5kZXhPZihwYXRoKSA9PT0gLTEpIHsKICAgICAgICB2YXIgdG1wUGF0aCA9IHBhdGguc3Vic3RyaW5nKDEsIHBhdGgubGVuZ3RoKTsKICAgICAgICBhY3RpdmVQYXRoID0gIi8iICsgdG1wUGF0aC5zdWJzdHJpbmcoMCwgdG1wUGF0aC5pbmRleE9mKCIvIikpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhcHAvdG9nZ2xlU2lkZUJhckhpZGUnLCBmYWxzZSk7CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuJHJvdXRlLmNoaWxkcmVuKSB7CiAgICAgICAgYWN0aXZlUGF0aCA9IHBhdGg7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2FwcC90b2dnbGVTaWRlQmFySGlkZScsIHRydWUpOwogICAgICB9CgogICAgICB0aGlzLmFjdGl2ZVJvdXRlcyhhY3RpdmVQYXRoKTsKICAgICAgcmV0dXJuIGFjdGl2ZVBhdGg7CiAgICB9CiAgfSwKICBiZWZvcmVNb3VudDogZnVuY3Rpb24gYmVmb3JlTW91bnQoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zZXRWaXNpYmxlTnVtYmVyKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5zZXRWaXNpYmxlTnVtYmVyKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNldFZpc2libGVOdW1iZXIoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOagueaNruWuveW6puiuoeeul+iuvue9ruaYvuekuuagj+aVsAogICAgc2V0VmlzaWJsZU51bWJlcjogZnVuY3Rpb24gc2V0VmlzaWJsZU51bWJlcigpIHsKICAgICAgdmFyIHdpZHRoID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAvIDM7CiAgICAgIHRoaXMudmlzaWJsZU51bWJlciA9IHBhcnNlSW50KHdpZHRoIC8gODUpOwogICAgfSwKICAgIC8vIOiPnOWNlemAieaLqeS6i+S7tgogICAgaGFuZGxlU2VsZWN0OiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Qoa2V5LCBrZXlQYXRoKSB7CiAgICAgIHRoaXMuY3VycmVudEluZGV4ID0ga2V5OwogICAgICB2YXIgcm91dGUgPSB0aGlzLnJvdXRlcnMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnBhdGggPT09IGtleTsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5pc2h0dHAoa2V5KSkgewogICAgICAgIC8vIGh0dHAocyk6Ly8g6Lev5b6E5paw56qX5Y+j5omT5byACiAgICAgICAgd2luZG93Lm9wZW4oa2V5LCAiX2JsYW5rIik7CiAgICAgIH0gZWxzZSBpZiAoIXJvdXRlIHx8ICFyb3V0ZS5jaGlsZHJlbikgewogICAgICAgIC8vIOayoeacieWtkOi3r+eUsei3r+W+hOWGhemDqOaJk+W8gAogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6IGtleQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhcHAvdG9nZ2xlU2lkZUJhckhpZGUnLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDmmL7npLrlt6bkvqfogZTliqjoj5zljZUKICAgICAgICB0aGlzLmFjdGl2ZVJvdXRlcyhrZXkpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhcHAvdG9nZ2xlU2lkZUJhckhpZGUnLCBmYWxzZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDlvZPliY3mv4DmtLvnmoTot6/nlLEKICAgIGFjdGl2ZVJvdXRlczogZnVuY3Rpb24gYWN0aXZlUm91dGVzKGtleSkgewogICAgICB2YXIgcm91dGVzID0gW107CgogICAgICBpZiAodGhpcy5jaGlsZHJlbk1lbnVzICYmIHRoaXMuY2hpbGRyZW5NZW51cy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5jaGlsZHJlbk1lbnVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaWYgKGtleSA9PSBpdGVtLnBhcmVudFBhdGggfHwga2V5ID09ICJpbmRleCIgJiYgIiIgPT0gaXRlbS5wYXRoKSB7CiAgICAgICAgICAgIHJvdXRlcy5wdXNoKGl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAocm91dGVzLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoIlNFVF9TSURFQkFSX1JPVVRFUlMiLCByb3V0ZXMpOwogICAgICB9CiAgICB9LAogICAgaXNodHRwOiBmdW5jdGlvbiBpc2h0dHAodXJsKSB7CiAgICAgIHJldHVybiB1cmwuaW5kZXhPZignaHR0cDovLycpICE9PSAtMSB8fCB1cmwuaW5kZXhPZignaHR0cHM6Ly8nKSAhPT0gLTE7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"mappings":";;;;;;;;;;;;;;;AA8BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;eAEA;EACAA,IADA,kBACA;IACA;MACA;MACAC,gBAFA;MAGA;MACAC;IAJA;EAMA,CARA;EASAC;IACAC,KADA,mBACA;MACA;IACA,CAHA;IAIA;IACAC,QALA,sBAKA;MACA;MACA;QACA;UACA;UACA;YACAA;UACA,CAFA,MAEA;YACAA;UACA;QACA;MACA,CATA;MAUA;IACA,CAlBA;IAmBA;IACAC,OApBA,qBAoBA;MACA;IACA,CAtBA;IAuBA;IACAC,aAxBA,2BAwBA;MAAA;;MACA;MACA;QACA;UACA;YACA;cACAC;YACA,CAFA,MAEA;cACA;gBACAA;cACA;YACA;;YACAA;UACA;;UACAD;QACA;MACA,CAdA;MAeA;IACA,CA1CA;IA2CA;IACAE,UA5CA,wBA4CA;MACA;MACA;;MACA;QACA;QACAC;QACA;MACA,CAJA,MAIA;QACAA;QACA;MACA;;MACA;MACA;IACA;EAzDA,CATA;EAoEAC,WApEA,yBAoEA;IACAC;EACA,CAtEA;EAuEAC,aAvEA,2BAuEA;IACAD;EACA,CAzEA;EA0EAE,OA1EA,qBA0EA;IACA;EACA,CA5EA;EA6EAC;IACA;IACAC,gBAFA,8BAEA;MACA;MACA;IACA,CALA;IAMA;IACAC,YAPA,wBAOAC,GAPA,EAOAC,OAPA,EAOA;MACA;MACA;QAAA;MAAA;;MACA;QACA;QACAP;MACA,CAHA,MAGA;QACA;QACA;UAAAQ;QAAA;QACA;MACA,CAJA,MAIA;QACA;QACA;QACA;MACA;IACA,CAtBA;IAuBA;IACAC,YAxBA,wBAwBAH,GAxBA,EAwBA;MACA;;MACA;QACA;UACA;YACAI;UACA;QACA,CAJA;MAKA;;MACA;QACA;MACA;IACA,CApCA;IAqCAC,MArCA,kBAqCAC,GArCA,EAqCA;MACA;IACA;EAvCA;AA7EA,C","names":["data","visibleNumber","currentIndex","computed","theme","topMenus","routers","childrenMenus","router","activeMenu","activePath","beforeMount","window","beforeDestroy","mounted","methods","setVisibleNumber","handleSelect","key","keyPath","path","activeRoutes","routes","ishttp","url"],"sourceRoot":"src/components/TopNav","sources":["index.vue"],"sourcesContent":["<template>\n  <el-menu\n    :default-active=\"activeMenu\"\n    mode=\"horizontal\"\n    @select=\"handleSelect\"\n  >\n    <template v-for=\"(item, index) in topMenus\">\n      <el-menu-item :style=\"{'--theme': theme}\" :index=\"item.path\" :key=\"index\" v-if=\"index < visibleNumber\"\n        ><svg-icon :icon-class=\"item.meta.icon\" />\n        {{ item.meta.title }}</el-menu-item\n      >\n    </template>\n\n    <!-- 顶部菜单超出数量折叠 -->\n    <el-submenu :style=\"{'--theme': theme}\" index=\"more\" v-if=\"topMenus.length > visibleNumber\">\n      <template slot=\"title\">更多菜单</template>\n      <template v-for=\"(item, index) in topMenus\">\n        <el-menu-item\n          :index=\"item.path\"\n          :key=\"index\"\n          v-if=\"index >= visibleNumber\"\n          ><svg-icon :icon-class=\"item.meta.icon\" />\n          {{ item.meta.title }}</el-menu-item\n        >\n      </template>\n    </el-submenu>\n  </el-menu>\n</template>\n\n<script>\nimport { constantRoutes } from \"@/router\";\n\n// 隐藏侧边栏路由\nconst hideList = ['/index', '/user/profile'];\n\nexport default {\n  data() {\n    return {\n      // 顶部栏初始数\n      visibleNumber: 5,\n      // 当前激活菜单的 index\n      currentIndex: undefined\n    };\n  },\n  computed: {\n    theme() {\n      return this.$store.state.settings.theme;\n    },\n    // 顶部显示菜单\n    topMenus() {\n      let topMenus = [];\n      this.routers.map((menu) => {\n        if (menu.hidden !== true) {\n          // 兼容顶部栏一级菜单内部跳转\n          if (menu.path === \"/\") {\n              topMenus.push(menu.children[0]);\n          } else {\n              topMenus.push(menu);\n          }\n        }\n      });\n      return topMenus;\n    },\n    // 所有的路由信息\n    routers() {\n      return this.$store.state.permission.topbarRouters;\n    },\n    // 设置子路由\n    childrenMenus() {\n      var childrenMenus = [];\n      this.routers.map((router) => {\n        for (var item in router.children) {\n          if (router.children[item].parentPath === undefined) {\n            if(router.path === \"/\") {\n              router.children[item].path = \"/\" + router.children[item].path;\n            } else {\n              if(!this.ishttp(router.children[item].path)) {\n                router.children[item].path = router.path + \"/\" + router.children[item].path;\n              }\n            }\n            router.children[item].parentPath = router.path;\n          }\n          childrenMenus.push(router.children[item]);\n        }\n      });\n      return constantRoutes.concat(childrenMenus);\n    },\n    // 默认激活的菜单\n    activeMenu() {\n      const path = this.$route.path;\n      let activePath = path;\n      if (path !== undefined && path.lastIndexOf(\"/\") > 0 && hideList.indexOf(path) === -1) {\n        const tmpPath = path.substring(1, path.length);\n        activePath = \"/\" + tmpPath.substring(0, tmpPath.indexOf(\"/\"));\n        this.$store.dispatch('app/toggleSideBarHide', false);\n      } else if(!this.$route.children) {\n        activePath = path;\n        this.$store.dispatch('app/toggleSideBarHide', true);\n      }\n      this.activeRoutes(activePath);\n      return activePath;\n    },\n  },\n  beforeMount() {\n    window.addEventListener('resize', this.setVisibleNumber)\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.setVisibleNumber)\n  },\n  mounted() {\n    this.setVisibleNumber();\n  },\n  methods: {\n    // 根据宽度计算设置显示栏数\n    setVisibleNumber() {\n      const width = document.body.getBoundingClientRect().width / 3;\n      this.visibleNumber = parseInt(width / 85);\n    },\n    // 菜单选择事件\n    handleSelect(key, keyPath) {\n      this.currentIndex = key;\n      const route = this.routers.find(item => item.path === key);\n      if (this.ishttp(key)) {\n        // http(s):// 路径新窗口打开\n        window.open(key, \"_blank\");\n      } else if (!route || !route.children) {\n        // 没有子路由路径内部打开\n        this.$router.push({ path: key });\n        this.$store.dispatch('app/toggleSideBarHide', true);\n      } else {\n        // 显示左侧联动菜单\n        this.activeRoutes(key);\n        this.$store.dispatch('app/toggleSideBarHide', false);\n      }\n    },\n    // 当前激活的路由\n    activeRoutes(key) {\n      var routes = [];\n      if (this.childrenMenus && this.childrenMenus.length > 0) {\n        this.childrenMenus.map((item) => {\n          if (key == item.parentPath || (key == \"index\" && \"\" == item.path)) {\n            routes.push(item);\n          }\n        });\n      }\n      if(routes.length > 0) {\n        this.$store.commit(\"SET_SIDEBAR_ROUTERS\", routes);\n      }\n    },\n    ishttp(url) {\n      return url.indexOf('http://') !== -1 || url.indexOf('https://') !== -1\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.topmenu-container.el-menu--horizontal > .el-menu-item {\n  float: left;\n  height: 50px !important;\n  line-height: 50px !important;\n  color: #999093 !important;\n  padding: 0 5px !important;\n  margin: 0 10px !important;\n}\n\n.topmenu-container.el-menu--horizontal > .el-menu-item.is-active, .el-menu--horizontal > .el-submenu.is-active .el-submenu__title {\n  border-bottom: 2px solid #{'var(--theme)'} !important;\n  color: #303133;\n}\n\n/* submenu item */\n.topmenu-container.el-menu--horizontal > .el-submenu .el-submenu__title {\n  float: left;\n  height: 50px !important;\n  line-height: 50px !important;\n  color: #999093 !important;\n  padding: 0 5px !important;\n  margin: 0 10px !important;\n}\n</style>\n"]}]}